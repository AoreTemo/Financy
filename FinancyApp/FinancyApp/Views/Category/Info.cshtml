@model CategoryViewModel

@{
    ViewBag.Title = "title";
    Layout = "_Layout";
}




<div class="list-group m-0">
    <div class="card-header ml-5">
        <p>Categories</p>
        <form method="post" asp-action="Add" asp-controller="Category">
            <div class="row">
                <div class="group">
                    <input asp-for="CategoryName" class="form-control" type="text" required>
                    <span asp-validation-for="CategoryName" class="highlight"></span>
                    <label class="login-lable">Write category name</label>
                </div>
                
                <div class="group">
                    <input type="color" value="#0000ff">
                    <span asp-validation-for="CategoryColor" class="highlight"></span>
                    <label>Choose a color</label>
                </div>

                <button class="w-100 btn btn-primary btn-lg" type="submit">Add</button>
            </div>
        </form>
        
    </div>
    @foreach (var category in Model.Categories)
    {
        <div class="list-group-item list-group-item-action card-link m-0" style="background-color: @category.CategoryColor">
            <div class="d-flex flex-column card-text-column px-5">
                <div class="d-flex w-100 justify-content-between">
                    <h5 class="mb-1">@category.CategoryName</h5>
                </div>
            </div>
            <div class="d-flex flex-column justify-content-around card-action-column">
                <a type="button" class="btn btn-sm btn-outline-info"
                    asp-controller="Category" asp-action="ViewCategoryCosts"
                    asp-route-id="@category.CategoryId">
                    View
                </a>
                <a type="button" class="btn btn-sm btn-outline-info edit-button"
                   data-id="@category.CategoryId"
                   data-name="@category.CategoryName"
                   data-color="@category.CategoryColor">
                    Edit
                </a>
                <a type="button" class="btn btn-sm btn-outline-danger"
                   asp-controller="Category" asp-action="Delete"
                   asp-route-id="@category.CategoryId">
                    Delete
                </a>
            </div>
        </div>
    }
</div>

<div class="card" id="popup_for_editing" style="display: none">
<form method="post" asp-action="Edit" asp-controller="Category" enctype="multipart/form-data" class="form" id="edit-form">
    <div class="row">
        <h2>Edit category</h2>
        <input type="hidden" name="id" value="" id="edit-id">
        <div class="group">
            <input asp-for="CategoryName" class="form-control" type="text" required id="edit-name">
            <span name="" class="highlight"></span>
            <label>Write category name</label>
        </div>

        <div class="group">
            <input type="color" value="#0000ff" id="edit-color">
            <span name="" class="highlight"></span>
            <label>Choose a color</label>
        </div>

        <button class="w-100 btn btn-primary btn-lg" type="submit">Save</button>
    </div>
</form>
</div>

<script >
    $(".edit-button").click(function() {
        var id = $(this).data('id');
        var name = $(this).data('name');
        var color = $(this).data('color');
    
        $("#edit-id").val(id);
        $("#edit-name").val(name);
        $("#edit-color").val(color);
    
        $("#popup_for_editing").show();
    });
</script>